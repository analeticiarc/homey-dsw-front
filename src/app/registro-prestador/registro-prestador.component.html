<div class="registro-page">
  <form (ngSubmit)="onSubmit()" class="registro-card">
    <h2 class="registro-title">Cadastro de Prestador</h2>

    <section class="registro-section">
      <h3>Dados Pessoais</h3>
      <div class="registro-grid">
        <div class="registro-field">
          <label for="nome">Nome completo</label>
          <input id="nome" name="nome" type="text" [(ngModel)]="nome" required />
        </div>

        <div class="registro-field">
          <label for="email">E-mail</label>
          <input id="email" name="email" type="email" [(ngModel)]="email" required />
        </div>

        <div class="registro-field">
          <label for="username">Username</label>
          <input id="username" name="username" type="text" [(ngModel)]="username" required />
        </div>

        <div class="registro-field">
          <label for="senha">Senha</label>
          <input id="senha" name="senha" type="password" [(ngModel)]="senha" required />
        </div>

        <div class="registro-field">
          <label for="dataNascimento">Data de nascimento</label>
          <input
            id="dataNascimento"
            name="dataNascimento"
            type="date"
            [(ngModel)]="dataNascimento"
            required
          />
        </div>

        <div class="registro-field">
          <label for="telefone">Telefone</label>
          <input
            id="telefone"
            name="telefone"
            type="tel"
            [(ngModel)]="telefone"
            required
          />
        </div>

        <div class="registro-field">
          <label for="cpfCnpj">CPF/CNPJ</label>
          <input
            id="cpfCnpj"
            name="cpfCnpj"
            type="text"
            [(ngModel)]="cpfCnpj"
            required
          />
        </div>
      </div>
    </section>

    <section class="registro-section">
      <h3>Endereço</h3>
      <div class="registro-grid">
        <div class="registro-field registro-field--full">
          <label for="logradouro">Logradouro</label>
          <input
            id="logradouro"
            name="logradouro"
            type="text"
            [(ngModel)]="logradouro"
            required
          />
        </div>

        <div class="registro-field">
          <label for="numero">Número</label>
          <input
            id="numero"
            name="numero"
            type="text"
            [(ngModel)]="numero"
            required
          />
        </div>

        <div class="registro-field">
          <label for="complemento">Complemento</label>
          <input
            id="complemento"
            name="complemento"
            type="text"
            [(ngModel)]="complemento"
          />
        </div>

        <div class="registro-field">
          <label for="bairro">Bairro</label>
          <input
            id="bairro"
            name="bairro"
            type="text"
            [(ngModel)]="bairro"
            required
          />
        </div>

        <div class="registro-field">
          <label for="cidade">Cidade</label>
          <input
            id="cidade"
            name="cidade"
            type="text"
            [(ngModel)]="cidade"
            required
          />
        </div>

        <div class="registro-field">
          <label for="estado">Estado</label>
          <input
            id="estado"
            name="estado"
            type="text"
            maxlength="2"
            [(ngModel)]="estado"
            required
          />
        </div>

        <div class="registro-field">
          <label for="cep">CEP</label>
          <div class="registro-cep-row">
            <input
		      id="cep"
		      name="cep"
		      type="text"
		      [(ngModel)]="cep"
		      required
		    />
            <button
              type="button"
              class="registro-buscar-coord"
              (click)="buscarCoordenadas()"
              [disabled]="buscandoCoordenadas"
            >
              {{ buscandoCoordenadas ? 'Buscando...' : 'Buscar coordenadas' }}
            </button>
          </div>
        </div>

        <div class="registro-field">
          <label for="latitude">Latitude</label>
          <input
            id="latitude"
            name="latitude"
            type="number"
            step="0.000001"
            [(ngModel)]="latitude"
			readonly
			disabled
			placeholder="Preenchido automaticamente"
          />
        </div>

        <div class="registro-field">
          <label for="longitude">Longitude</label>
          <input
            id="longitude"
            name="longitude"
            type="number"
            step="0.000001"
            [(ngModel)]="longitude"
			readonly
			disabled
			placeholder="Preenchido automaticamente"
          />
        </div>
      </div>
    </section>

    <button type="submit" class="registro-button" [disabled]="isSubmitting">
      {{ isSubmitting ? 'Enviando...' : 'Cadastrar' }}
    </button>

    @if (errorMessage) {
      <div class="registro-message registro-message--error">
        {{ errorMessage }}
      </div>
    } @else if (successMessage) {
      <div class="registro-message registro-message--success">
        {{ successMessage }}
      </div>
    }
  </form>
</div>
